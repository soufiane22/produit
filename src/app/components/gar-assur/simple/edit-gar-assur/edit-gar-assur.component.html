<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card tab2-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-info pull-right" (click)="retoure()">
                            <i class="fa fa-undo"></i>
                             Retoure
                         </button>
                    </div>
                   </div>
                    <ngb-tabset class="tab-coupon profile-tabs">
                        <ngb-tab>
                            <ng-template ngbTabTitle>
                                <app-feather-icons [icon]="'layout'"></app-feather-icons>Contenu Multi media
                            </ng-template>
                            <ng-template ngbTabContent>
                                <!-- class="tab-pane fade show active"  -->
                                <div id="top-profile" role="tabpanel" aria-labelledby="top-profile-tab">
                                    <h5 class="f-w-600"> Informations</h5>
                                    <form [formGroup]="garAssurForm" *ngIf="garAssurForm">
                                        <div class="row product-adding">
                                            <div class="col-xl-6">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5>General</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="digital-add needs-validation">
                                                            <div class="form-group">
                                                                <label for="contratModel"
                                                                    class="col-form-label"><span>*</span> Contrat
                                                                    modèle</label>

                                                                <div class="row">
                                                                    <div class="col-md-12">
                                                                        <input type="file" class="form-control"
                                                                            (change)="readUrl($event)">
                                                                    </div>
                                                                </div>

                                                                <div *ngIf="contratModel.invalid && (contratModel.touched || contratModel.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="contratModel.errors?.required">
                                                                        The Contrat modèle is required.
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="card">
                                                    <div class="card-header">
                                                        <h5>Complémentaire</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <div class="digital-add needs-validation">
                                                            <div class="form-group">
                                                                <label for="refGarAssur"
                                                                    class="col-form-label"><span>*</span> Réference
                                                                    Garantie Assurance</label>
                                                                <input class="form-control" id="refGarAssur" type="text"
                                                                    required="" formControlName="refGarAssur">
                                                                <div *ngIf="refGarAssur.invalid && (refGarAssur.touched || refGarAssur.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="refGarAssur.errors?.required">
                                                                        The Referentie Garantie Assurance is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="typeGarAssur"
                                                                    class="col-form-label"><span>*</span> Type Garantie
                                                                    Assurance</label>
                                                                <ng-multiselect-dropdown id="typeGarAssur"
                                                                    name="typeGarAssur" [data]="listTGA"
                                                                    formControlName="typeGarAssur"
                                                                    [settings]="dropdownTGASettings"
                                                                    [placeholder]="'-- Select Type Garantie Assurance --'">
                                                                </ng-multiselect-dropdown>
                                                                <div *ngIf="typeGarAssur.invalid && (typeGarAssur.touched || typeGarAssur.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="typeGarAssur.errors?.required">
                                                                        The Type Garantie Assurance is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="valid_de"
                                                                    class="col-form-label"><span>*</span> Valide à
                                                                    partir de</label>
                                                                <div class="input-group col-md-12 input-grp-p">
                                                                    <input class="datepicker-here form-control digits"
                                                                        ngbDatepicker formControlName="valid_de"
                                                                        #d="ngbDatepicker" placeholder="dd/mm/yyyy">
                                                                    <div class="input-group-append">
                                                                        <button class="btn calendar"
                                                                            (click)="d.toggle()" type="button"><i
                                                                                class="fa fa-calendar"></i></button>
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="valid_de.invalid && (valid_de.touched || valid_de.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="valid_de.errors?.required">
                                                                        The Valide à partir de is required.
                                                                    </div>
                                                                    <div *ngIf="valid_de.errors?.invalidValue">
                                                                        The Valide à partir de is not valid. (Format:
                                                                        dd/mm/yyyy)
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="duree" class="col-form-label"><span>*</span>
                                                                    Durée Garantie</label>
                                                                <input class="form-control" id="duree" type="number"
                                                                    required="" formControlName="duree">
                                                                <div *ngIf="duree.invalid && (duree.touched || duree.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="duree.errors?.required">
                                                                        The Unité Durée is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="uniteDureeGar"
                                                                    class="col-form-label"><span>*</span> Unité Durée
                                                                    Garantie</label>
                                                                <ng-multiselect-dropdown id="uniteDureeGar"
                                                                    name="uniteDureeGar" [data]="listUDG"
                                                                    formControlName="uniteDureeGar"
                                                                    [settings]="dropdownUDGSettings"
                                                                    [placeholder]="'-- Select Unité Durée Garantie --'">
                                                                </ng-multiselect-dropdown>
                                                                <div *ngIf="uniteDureeGar.invalid && (uniteDureeGar.touched || uniteDureeGar.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="uniteDureeGar.errors?.required">
                                                                        The Unité Durée Garantie Assurance is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="valeurGar"
                                                                    class="col-form-label"><span>*</span> Valeur
                                                                    Garantie</label>
                                                                <input class="form-control" id="valeurGar" type="number"
                                                                    required="" formControlName="valeurGar">
                                                                <div *ngIf="valeurGar.invalid && (valeurGar.touched || valeurGar.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="valeurGar.errors?.required">
                                                                        The Valeur garantie is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="monnaie"
                                                                    class="col-form-label"><span>*</span>
                                                                    Monnaie</label>
                                                                <ng-multiselect-dropdown name="monnaie"
                                                                    [placeholder]="'-- Select Monnaie --'"
                                                                    [settings]="dropdownMonnaieSettings"
                                                                    formControlName="monnaie" [data]="listMonnaies">
                                                                    <ng-template #optionsTemplate let-item
                                                                        let-option="option" let-id="id"
                                                                        let-isSelected="isSelected">
                                                                        <div
                                                                            style="padding:1px 10px;margin-right:10px;right:2px;top:-2px">
                                                                            <img [src]="getMonnaies[id].image"
                                                                                style="width: 18px; margin: 0 20px;" />
                                                                            <label style="color: #333;min-width: 130px;"
                                                                                [ngStyle]="{ 'color': getMonnaies[id].isDisabled? 'lightgrey':''}">
                                                                                {{getMonnaies[id].item_text}}
                                                                            </label>
                                                                        </div>
                                                                    </ng-template>
                                                                    <ng-template #optionSelectedTemplate
                                                                        let-option="option" let-id="id">
                                                                        <div>
                                                                            <img [src]="getMonnaies[id].image"
                                                                                style="width: 18px; margin-right: 2px;" />
                                                                            {{option}}
                                                                        </div>
                                                                    </ng-template>
                                                                </ng-multiselect-dropdown>
                                                                <div *ngIf="monnaie.invalid && (monnaie.touched||monnaie.dirty)"
                                                                    class="text text-danger">

                                                                    <div *ngIf="monnaie.errors?.required">
                                                                        The Monnaie is required.
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="__descriptif"
                                                                    class="col-form-label"><span>*</span> Descriptif
                                                                </label>
                                                                <textarea class="form-control" name="__descriptif" id=""
                                                                    cols="30" rows="2"
                                                                    formControlName="__descriptif"></textarea>
                                                                <div *ngIf="__descriptif.invalid && (__descriptif.touched || __descriptif.dirty)"
                                                                    class="text text-danger">
                                                                    The descriptif is required
                                                                </div>
                                                            </div>


                                                            <div class="form-group mb-0">
                                                                <div class="product-buttons text-center">
                                                                    <button type="button" class="btn btn-primary mr-1"
                                                                        (click)="editGarAssur()">Edit</button>
                                                                    <button type="button" (click)="clearValues()"
                                                                        class="btn btn-light">Discard</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab>
                            <ng-template ngbTabTitle>
                                <i data-feather="cloud"></i> Produit
                            </ng-template>
                            <ng-template ngbTabContent>
                                <div class="account-setting">
                                    <h5 class="f-w-600">Produit associé à la garantie assurance</h5>
                                    <form [formGroup]="garAssurProductForm" *ngIf="garAssurProductForm">
                                        <div class="digital-add needs-validation">
                                            <div class="form-group">
                                                <label for="produitService" class="col-form-label pt-0"><span>*</span>
                                                    Produit</label>
                                                <ng-multiselect-dropdown id="produitService" name="produitService"
                                                    [settings]="dropdownProduitSettings"
                                                    formControlName="produitService" [data]="listProduits"
                                                    [placeholder]="'-- Select Produit --'">
                                                </ng-multiselect-dropdown>
                                                <div *ngIf="produitService.invalid && produitService.touched"
                                                    class="text text-danger">
                                                    <div *ngIf="produitService.errors?.required">
                                                        The Produit is required.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group mb-0">
                                            <div class="product-buttons text-center">
                                                <button type="button" class="btn btn-primary mr-1"
                                                    [disabled]="garAssurProductForm.invalid"
                                                    (click)="editGarAssurProduct()">Add
                                                    to garantie assurance</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </ng-template>
                        </ngb-tab>
                        <ngb-tab>
                            <ng-template ngbTabTitle>
                                <i data-feather="cloud"></i> Contenu Multi media
                            </ng-template>
                            <ng-template ngbTabContent>
                                <div class="account-setting">
                                    <h5 class="f-w-600">Contenu Multi media associée à la garantie assurance</h5>
                                    <form [formGroup]="garAssurContMmediaForm" *ngIf="garAssurContMmediaForm">
                                        <div class="digital-add needs-validation">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="contenuMmedia"
                                                            class="col-form-label pt-0"><span>*</span>
                                                            Garantie assurance</label>
                                                        <ng-multiselect-dropdown id="contenuMmedia" name="contenuMmedia"
                                                            [settings]="dropdownContMmediaSettings"
                                                            formControlName="contenuMmedia" [data]="data"
                                                            [placeholder]="'-- Select Contenu Multi media --'"
                                                           >
                                                            <!--   (onSelect)="onItemSelect($event)"
                                                            (onDeSelect)="onItemDeSelect($event)"
                                                         (onSelectAll)="onSelectAll($event)"
                                                            (onDeSelectAll)="onSelectAll($event)"-->
                                                        </ng-multiselect-dropdown>
                                                        <div *ngIf="contenuMmedia.invalid && contenuMmedia.touched"
                                                            class="text text-danger">
                                                            <div *ngIf="contenuMmedia.errors?.required">
                                                                The Contenu Multi media is required.
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <div class="product-buttons mt-5">
                                                                    <button type="button" class="btn btn-primary mr-1"
                                                                        [disabled]="garAssurContMmediaForm.invalid"
                                                                        (click)="editGarAssurContMmedia()">Add
                                                                        to garantie assurance</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                            <div class="col-md-6">
                                                                <div class="product-buttons mt-5">
                                                                    <button type="button" class="btn btn-info mr-1"
                                                                        (click)="add_new_contMmedia()">Add New
                                                                    </button>
                                                                </div>

                                                            </div>


                                                    </div>


                                                </div>
                                            </div>

                                        </div>
                                    </form>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                      <thead>
                                        <tr>
                                          <!-- <th> {{'garAssur.reference' | translate}}</th>
                                          <th> {{'garAssur.titre' | translate}}</th>
                                          <th> {{'garAssur.type' | translate}}</th>
                                          <th> {{'garAssur.format' | translate}}</th>
                                          <th> {{'garAssur.taille' | translate}}</th>
                                          <th> {{'garAssur.externe' | translate}}</th>
                                          <th style="text-align: center;"> {{'garAssur.contenu' | translate}}</th>
                                          <th> {{'garAssur.action' | translate}}</th> -->
                                          <th scope="col" *ngFor="let header of contMmediaHeaders">{{header}}</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr *ngFor="let contMmedia of listContMmedias">
                                          <td>{{contMmedia.refContenu}}</td>
                                          <td>{{contMmedia.titreDoc}}</td>
                                          <td>{{contMmedia.typeContenu}}</td>
                                          <td>{{contMmedia.formatDoc}}</td>
                                          <td>{{contMmedia.tailleDoc}} {{contMmedia.uniteTaille}}</td>
                                          <td>{{contMmedia.provenanceInterne?"Oui":"Non"}}</td>
                                          <td>{{contMmedia.relation}} </td>
                                          <td style="text-align: center;">
                                            <a (click)="openFile(contMmedia.urlDoc)"
                                            href="javascript:;"  ><i class="fa fa-download "></i></a>
                                          </td>

                                          <td>

                                            <!-- <a (click)="onClickShowContMmedia(contMmedia._id)" href="javascript:;" class="text text-info"><i
                                                class="fa fa-eye"></i></a>&nbsp;
                                            |&nbsp;
                                                  -->
                                            <a (click)="onClickEditContMmedia(contMmedia._id)" href="javascript:;"
                                              class="text text-warning"><i class="fa fa-edit"></i></a>&nbsp;
                                            |&nbsp;

                                            <a href="javascript:;" class="text text-danger" (click)="delet_contMmedia(contMmedia._id)">
                                                <i class="fa fa-trash"></i>
                                            </a>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                            </ng-template>
                        </ngb-tab>
                    </ngb-tabset>
                </div>
            </div>
        </div>

    </div>
</div>
